{"ast":null,"code":"var _jsxFileName = \"/Users/sundararajankarthik/Documents/webdev/stocksbucket/frontend/src/components/watchlist/Watchlists.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport SearchIcon from '../../icons/search-solid.svg';\nimport CloseIcon from '../../icons/times-solid.svg';\nimport PlusIcon from '../../icons/plus-solid.svg';\nimport { Link } from 'react-router-dom';\nimport Loading from '../Loading';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getWatchlists, getCurrentWatchlistId, getWatchlist, addTickersToWatchlist, removeAssetFromWatchlist } from '../../actions/watchlistsAction';\nimport { getTicker, clearTicker, clearTickerError } from '../../actions/tickerAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Watchlists = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const watchlistsData = useSelector(state => state.watchlists);\n  const tickerData = useSelector(state => state.ticker);\n  const {\n    watchlists,\n    watchlistsLoading,\n    currentId,\n    watchlistLoading,\n    watchlistsError,\n    assets,\n    assetLoading,\n    assetError\n  } = watchlistsData;\n  const {\n    ticker,\n    tickerLoading,\n    tickerError\n  } = tickerData;\n  const [active, setActive] = useState(0);\n  const [activeId, setActiveId] = useState(0);\n  const id = active === 0 ? currentId : activeId;\n  const [open, setOpen] = useState(false);\n  const ref = useRef();\n  useEffect(() => {\n    let handler = e => {\n      if (open && ref.current && !ref.current.contains(e.target)) {\n        setOpen(false);\n      }\n    };\n\n    document.addEventListener('click', handler);\n    return () => {\n      document.removeEventListener('click', handler);\n    };\n  }, [open]);\n  useEffect(() => {\n    dispatch(getWatchlists());\n    dispatch(getCurrentWatchlistId());\n  }, []);\n  useEffect(() => {\n    if (id !== '') {\n      dispatch(getWatchlist(id));\n    }\n  }, [id]); // handle Search \n\n  const handleSearch = e => {\n    const symb = e.target.value.toUpperCase();\n\n    if (symb !== \"\") {\n      dispatch(getTicker(symb));\n      setOpen(true);\n    } else {\n      dispatch(clearTicker());\n      dispatch(clearTickerError());\n    }\n  }; //handle click \n\n\n  const handleClick = symb => {\n    console.log(symb, id);\n    dispatch(addTickersToWatchlist(symb, id));\n  }; // handle delete \n\n\n  const handleDelete = symb => {\n    console.log(symb);\n    dispatch(removeAssetFromWatchlist(symb, id));\n  }; //show Asset msg \n\n\n  const showAssetMsg = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"show-asset-msg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add assets using searchbar. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this);\n  }; // create asset\n\n\n  const createAsset = asset => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"asset\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"asset-name\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          className: \"link\",\n          to: `/asset/details/${asset.id}`,\n          children: asset.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"price-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"percentage-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"percentage\",\n            children: \"0.23 %\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-chevron-up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"asset-price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"price\",\n            children: \"2564\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => handleDelete(asset.symbol),\n            className: \"close-btn\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 96\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, asset.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this);\n  }; // render Assets \n\n\n  const renderAssets = () => {\n    return assets.length !== undefined && assets.length > 0 ? assets.map(asset => createAsset(asset)) : showAssetMsg();\n  };\n\n  const storedAsset = assets !== undefined && assets.length > 0 ? assets.find(a => a.id === ticker.id) : null;\n  const storedAssetVal = storedAsset ? true : false; //create content\n\n  const createContent = (watch, index) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: active === index ? \"content active-content\" : \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          ref: ref,\n          onChange: handleSearch,\n          className: \"form-control\",\n          placeholder: \"Seach for tickers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: SearchIcon,\n          className: \"search-icon\",\n          alt: \"search-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), open && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group\",\n        children: [ticker.name && /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: ticker.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 33\n          }, this), storedAssetVal ? /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: PlusIcon,\n            className: \"plus-icon\",\n            alt: \"plus-icon\",\n            onClick: () => handleClick(ticker.symbol)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 29\n        }, this), tickerError && /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item center\",\n          children: tickerError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"assets\",\n        children: assetLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 37\n        }, this) : renderAssets()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this);\n  }; //renderContent \n\n\n  const renderContent = () => {\n    return watchlists.length > 0 && watchlists.map((watch, index) => createContent(watch, index));\n  }; //handle active \n\n\n  const handleActive = (index, id) => {\n    setActive(index);\n    setActiveId(id);\n  }; //create tab \n\n\n  const createTab = (watch, index) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: active === index ? \"tab active\" : \"tab\",\n      onClick: () => handleActive(index, watch.id),\n      children: watch.name\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this);\n  }; //render watchlists \n\n\n  const renderWatchlists = () => {\n    return watchlists.length > 0 ? watchlists.map((watch, index) => createTab(watch, index)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"watchlist-user-msg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"You dont have any watchlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Link, {\n          className: \"link\",\n          to: \"/create/watchlist\",\n          children: \"Create a watchlist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 21\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }, this);\n  }; //console.log(assets);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-header\",\n        children: watchlistsLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 42\n        }, this) : renderWatchlists()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-content\",\n        children: watchlistLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 41\n        }, this) : renderContent()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Watchlists, \"4NziaFKRkAZMYx5Yj0awVsN5e8k=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Watchlists;\nexport default Watchlists;\n\nvar _c;\n\n$RefreshReg$(_c, \"Watchlists\");","map":{"version":3,"sources":["/Users/sundararajankarthik/Documents/webdev/stocksbucket/frontend/src/components/watchlist/Watchlists.js"],"names":["React","useState","useEffect","useRef","SearchIcon","CloseIcon","PlusIcon","Link","Loading","useDispatch","useSelector","getWatchlists","getCurrentWatchlistId","getWatchlist","addTickersToWatchlist","removeAssetFromWatchlist","getTicker","clearTicker","clearTickerError","Watchlists","dispatch","watchlistsData","state","watchlists","tickerData","ticker","watchlistsLoading","currentId","watchlistLoading","watchlistsError","assets","assetLoading","assetError","tickerLoading","tickerError","active","setActive","activeId","setActiveId","id","open","setOpen","ref","handler","e","current","contains","target","document","addEventListener","removeEventListener","handleSearch","symb","value","toUpperCase","handleClick","console","log","handleDelete","showAssetMsg","createAsset","asset","name","symbol","renderAssets","length","undefined","map","storedAsset","find","a","storedAssetVal","createContent","watch","index","renderContent","handleActive","createTab","renderWatchlists"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport SearchIcon from '../../icons/search-solid.svg';\nimport CloseIcon from '../../icons/times-solid.svg';\nimport PlusIcon from '../../icons/plus-solid.svg';\nimport { Link } from 'react-router-dom';\nimport Loading from '../Loading';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getWatchlists, getCurrentWatchlistId, getWatchlist, addTickersToWatchlist, removeAssetFromWatchlist } from '../../actions/watchlistsAction';\nimport { getTicker, clearTicker, clearTickerError } from '../../actions/tickerAction';\n\nconst Watchlists = () => {\n    const dispatch = useDispatch();\n    const watchlistsData = useSelector(state => state.watchlists);\n    const tickerData = useSelector(state => state.ticker);\n    const { watchlists, watchlistsLoading, currentId, watchlistLoading, watchlistsError, assets, assetLoading, assetError } = watchlistsData;\n    const { ticker, tickerLoading, tickerError } = tickerData;\n    const [active, setActive] = useState(0);\n    const [activeId, setActiveId] = useState(0);\n    const id = active === 0 ? currentId : activeId;\n    const [open, setOpen] = useState(false);\n    const ref = useRef();\n    useEffect(() => {\n        let handler = (e) => {\n            if (open && ref.current && !ref.current.contains(e.target)) {\n                setOpen(false)\n            }\n        }\n        document.addEventListener('click', handler);\n        return () => {\n            document.removeEventListener('click', handler);\n        }\n    }, [open])\n    useEffect(() => {\n        dispatch(getWatchlists())\n        dispatch(getCurrentWatchlistId())\n    }, [])\n    useEffect(() => {\n        if (id !== '') {\n            dispatch(getWatchlist(id))\n        }\n    }, [id])\n\n    // handle Search \n    const handleSearch = (e) => {\n        const symb = e.target.value.toUpperCase();\n        if (symb !== \"\") {\n            dispatch(getTicker(symb))\n            setOpen(true);\n        } else {\n            dispatch(clearTicker())\n            dispatch(clearTickerError())\n        }\n    }\n    //handle click \n    const handleClick = (symb) => {\n        console.log(symb, id);\n        dispatch(addTickersToWatchlist(symb, id));\n    }\n    // handle delete \n    const handleDelete = (symb) => {\n        console.log(symb);\n        dispatch(removeAssetFromWatchlist(symb, id))\n    }\n    //show Asset msg \n    const showAssetMsg = () => {\n        return (\n            <div className=\"show-asset-msg\">\n                <h2>No assets</h2>\n                <p>Add assets using searchbar. </p>\n            </div>\n        )\n    }\n    // create asset\n    const createAsset = (asset) => {\n        return (\n            <div className='asset' key={asset.id}>\n                <div className=\"asset-name\">\n                    <Link className=\"link\" to={`/asset/details/${asset.id}`}>{asset.name}</Link>\n                </div>\n                <div className=\"price-section\">\n                    <div className=\"percentage-section\">\n                        <p className=\"percentage\">0.23 %</p>\n                        <i className=\"fas fa-chevron-up\"></i>\n                    </div>\n                    <div className=\"asset-price-section\">\n                        <p className=\"price\">2564</p>\n                        <span onClick={() => handleDelete(asset.symbol)} className=\"close-btn\"><i className=\"fas fa-times\"></i></span>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n    // render Assets \n    const renderAssets = () => {\n        return assets.length !== undefined && assets.length > 0 ? assets.map((asset) => createAsset(asset))\n            : showAssetMsg()\n    }\n    const storedAsset = assets !== undefined && assets.length > 0 ? assets.find(a => a.id === ticker.id) : null;\n    const storedAssetVal = storedAsset ? true : false;\n    //create content\n    const createContent = (watch, index) => {\n        return (\n            <div className={active === index ? \"content active-content\" : \"content\"} key={index}>\n                <div className=\"form-group\" >\n                    <input type=\"text\" ref={ref} onChange={handleSearch} className=\"form-control\" placeholder=\"Seach for tickers\" />\n                    <img src={SearchIcon} className=\"search-icon\" alt=\"search-icon\" />\n                </div>\n                {open &&\n                    <ul className=\"list-group\">\n                        {ticker.name &&\n                            <li className=\"list-group-item\">\n                                <span>{ticker.name}</span>\n                                {storedAssetVal ?\n                                    <i className=\"fas fa-check\"></i> :\n                                    <img src={PlusIcon} className=\"plus-icon\" alt=\"plus-icon\" onClick={() => handleClick(ticker.symbol)} />\n                                }\n                            </li>\n                        }\n                        {tickerError && <li className=\"list-group-item center\">{tickerError}</li>}\n                    </ul>\n                }\n                <div className=\"assets\">\n                    {assetLoading ? <Loading /> : renderAssets()}\n                </div>\n            </div >\n        )\n    }\n    //renderContent \n    const renderContent = () => {\n        return watchlists.length > 0 && watchlists.map((watch, index) => createContent(watch, index))\n    }\n    //handle active \n    const handleActive = (index, id) => {\n        setActive(index);\n        setActiveId(id);\n    }\n    //create tab \n    const createTab = (watch, index) => {\n        return (\n            <div className={active === index ? \"tab active\" : \"tab\"} key={index} onClick={() => handleActive(index, watch.id)}>\n                {watch.name}\n            </div>\n        )\n    }\n    //render watchlists \n    const renderWatchlists = () => {\n        return watchlists.length > 0 ? watchlists.map((watch, index) => createTab(watch, index))\n            : <div className=\"watchlist-user-msg\">\n                <h2>You dont have any watchlist</h2>\n                <p> <Link className=\"link\" to=\"/create/watchlist\">Create a watchlist</Link> </p>\n            </div>\n    }\n    //console.log(assets);\n    return (\n        <div className=\"container\">\n            <div className=\"tabs\">\n                <div className=\"tab-header\">\n                    {watchlistsLoading ? <Loading /> : renderWatchlists()}\n                </div>\n                <div className=\"tab-content\">\n                    {watchlistLoading ? <Loading /> : renderContent()}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Watchlists\n"]},"metadata":{},"sourceType":"module"}